{% extends "base.html" %}
{% block content %}
  <div id="cuerpoHeredado">

    <center><h1>Gestión de Récipes Médicos</h1></center>
    <div id="show-instituciones"><table>
      <tr>
        <th style="text-align: center;">Medicamento</th>
        <th style="text-align: center;">Paciente</th>
        <th style="text-align: center">
        <a id="add_recipe" href="{% url 'agregar_recipe' %}">
          <i class="fa fa-plus-circle" style="font-size:20px;color:white"></i>
        </a>
        </th>
      </tr>
      {% for res in recipes %}
      <!-- Modal content -->
      <div class="modal fade" id="myModal{{res.pk}}" role="dialog">

      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Eliminar Récipe</h4>
          </div>
          <div class="modal-body">
            <p>¿Está seguro que desea eliminar este récipe?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
            <a type="button" class="btn btn-primary" href="{% url 'eliminar_recipe' res.pk %}" > Aceptar</a>
          </div>
        </div>

      </div>
    </div>

    <div class="modal fade" id="infoRecipe_{{res.id}}" role="dialog">

      <div class="modal-dialog ">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Visualizar detalles del récipe</h4>
          </div>
          <div class="modal-body">
            <ul id="datos-recipe">
              <li>Fecha: {{res.fecha}} </li>
              <li>Nombre del Paciente: {{res.paciente.usuario.user.get_full_name}} </li>
              <li>Medicamentos: 
                <ol>{% for medicamento in res.medicamentos.all %}
                  <li>{{medicamento.nombre}}</li>
                {% endfor %} 
                </ol>
              </li>
              <li>
                Indicaciones: {{res.indicaciones}}
              </li>

            </ul>
          </div>
          <div class="modal-footer">
          </div>
        </div>

      </div>
    </div>


    
          <tr>
          <td style="text-align: center;">
            <a data-toggle="modal" data-target="#infoRecipe_{{res.id}}" ><i class="fa fa-eye" style="font-size:20px;color:#5882FA"></i></a>
          </td>
          </td>
          <td style="text-align: center;">{{res.paciente}}</td>

          <td style="text-align: center;">
            <a href="{% url 'modificar_recipe' res.pk %}"><i class="fa fa-pencil" style="font-size:20px;color:#5882FA"></i></a>
            <a data-toggle="modal" data-target="#myModal{{res.pk}}" ><i class="fa fa-trash" style="font-size:20px;color:#5882FA"></i></a>

          </td>

        </tr>
      {% endfor%}
    </table></div>
  </div>
{% endblock %}
